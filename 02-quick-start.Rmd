---
title: "Vignette 2: Quick start"
---

---

# 2.1 Preparation

You will need the following things:

* 1. **All software**: Freesurfer, R, QDECR, etc. (see [Vignette 1](01-getting-started.html)).
* 2. **Freesurfer data**: Your Freesurfer output  files in a single directory (usually SUBJECTS_DIR).
* 3. **Base data**: Your dataset with covariates, determinants, etc., loaded into R.

# 2.2 Running QDECR

For now, lets focus on the application of multiple linear regression to each vertex. 

We will study the association of age (variable: `age`) with cortical thickness, and adjust for sex (variable: `sex`). This yields the following formula: `qdecr_thickness ~ age + sex`. Below is an example of `qdecr_fastlm`, which lets us do linear regression:

```{r eval = FALSE, tidy = FALSE}

library(QDECR)

out <- qdecr_fastlm(qdecr_thickness ~ age + sex, 
                    data = data,
                    id = "id", 
                    hemi = "lh",
                    project = "test_project",
                    dir_tmp = "/dev/shm")
```

Here are the arguments we specified:

* `formula`: The formula object is the first argument; we directly input `qdecr_thickness ~ age + sex`.
* `data`: The data argument requires a `data frame`, a `list` of `data frames` or an imputed object from a package like `mice`. 
* `id`: Here you should put (as a character) the column name in your dataset that contains the identifiers for `SUBJECTS_DIR`.
* `hemi`: The hemisphere you want to analyze (`lh` for left, `rh` for right). 
* `project`: The name that you want for your output. By default, both `hemi` and the vertex measure get added to it (so `lh.test_project.qdecr_thickness`).
* `dir_tmp`: **To make `QDECR` run fast, you need to use shared memory.**

There are a bunch of other arguments that you can specify: **I WILL ADD DESCRIPTIONS LATER!**

* `dir_out`: 
* `n_cores`: 
* `target`: 
* `mcz_thr`: 
* `mgh`: 
* `mask`: 
* `dir_subj`: 
* `dir_fshome`: 
* `dir_out_tree`: 
* `clean_up_bm`: 
* `clean_up`: 
* `clobber`: 
* `verbose`: 
* `save`: 
* `save_data`: 
* `debug`: 

Running `qdecr_fastlm` takes several minutes (unless you have big datasets, then it can take a bit longer).

# 2.3 Checking the output

We saved the output in the variable out. Here are some commands that you can use to check out what it did:

```{r eval = FALSE, tidy = FALSE}

# global checks
out                         # gives a summary
print(out)                  # same as typing `out`
summary(out)                # returns all significant clusters

# specific checks
formula(out)                # returns the formula used
nobs(out)                   # returns the number of participants
stacks(out)                 # returns all available contrasts from the model







```